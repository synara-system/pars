<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>PARS Security Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg-root: #050510;
      --bg-card: #111322;
      --bg-card-alt: #141627;
      --bg-chip: #1b1e33;
      --accent-purple: #a855f7;
      --accent-cyan: #22e9ff;
      --accent-pink: #ff3b81;
      --accent-yellow: #ffc857;
      --accent-green: #22c55e;
      --accent-red: #ff006e;
      --text-main: #ffffff;
      --text-muted: #9ca3c7;
      --border-subtle: #252741;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 20px 40px rgba(0, 0, 0, 0.6);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", sans-serif;
      background: radial-gradient(circle at top left, #1b1030 0, transparent 55%),
                  radial-gradient(circle at bottom right, #101b30 0, transparent 55%),
                  var(--bg-root);
      color: var(--text-main);
      min-height: 100vh;
      padding: 24px;
    }

    .shell {
      max-width: 1260px;
      margin: 0 auto;
      background: rgba(2, 4, 20, 0.9);
      border-radius: 26px;
      border: 1px solid rgba(148, 163, 255, 0.12);
      box-shadow: var(--shadow-soft);
      padding: 20px 24px 26px;
      position: relative;
      overflow: hidden;
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top center, rgba(168, 85, 247, 0.18), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .shell-inner {
      position: relative;
      z-index: 1;
    }

    /* Top bar */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background: radial-gradient(circle at 20% 20%, #ffffff, #f97316 32%, #111827 80%);
      position: relative;
      box-shadow: 0 0 20px rgba(248, 113, 22, 0.5);
      overflow: hidden;
    }

    .brand-logo::after {
      content: "P";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 22px;
      color: #020617;
      text-shadow: 0 0 12px rgba(0, 0, 0, 0.4);
    }

    .brand-text-title {
      font-weight: 700;
      letter-spacing: 0.12em;
      font-size: 13px;
      text-transform: uppercase;
      color: #e5e7ff;
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--text-muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .nav-tabs {
      display: inline-flex;
      gap: 8px;
      padding: 4px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 255, 0.2);
    }

    .nav-tab {
      font-size: 11px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 0;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }

    .nav-tab span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148, 163, 255, 0.5);
    }

    .nav-tab-active {
      background: radial-gradient(circle at top left, #a855f7, #3b82f6);
      color: #0b1020;
      font-weight: 600;
      box-shadow: 0 0 20px rgba(129, 140, 248, 0.65);
    }

    .nav-tab-active span.dot {
      background: #0b1020;
    }
    
    /* Input Styling for Target */
    .target-input-group {
        display: flex;
        gap: 8px;
        background: rgba(15, 23, 42, 0.8);
        padding: 4px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 255, 0.3);
    }
    
    .target-input {
        background: transparent;
        border: none;
        color: white;
        padding: 6px 12px;
        font-size: 11px;
        width: 200px;
        outline: none;
    }
    
    .btn-action {
        cursor: pointer;
        padding: 6px 16px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 600;
        border: none;
        transition: 0.2s;
    }
    
    .btn-start {
        background: var(--accent-green);
        color: #000;
    }
    
    .btn-stop {
        background: var(--accent-red);
        color: #fff;
    }

    .top-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .pill {
      font-size: 11px;
      padding: 5px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 255, 0.4);
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pill span-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    .avatar {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fef3c7, #f97316);
      border: 2px solid rgba(248, 250, 252, 0.95);
    }

    /* Layout */
    .grid-top {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.6fr);
      gap: 16px;
      margin-bottom: 18px;
    }

    .grid-top-right {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 16px;
    }

    .card {
      background: radial-gradient(circle at top left, rgba(148, 163, 255, 0.05), transparent 45%),
                  var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 16px 18px 18px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.65);
    }

    .card-compact {
      border-radius: var(--radius-md);
      padding: 14px 16px 16px;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #e5e7ff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .card-title span.accent-bar {
      width: 12px;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, #a855f7, #22e9ff);
    }

    .card-subtext {
      font-size: 11px;
      color: var(--text-muted);
    }

    .badge-soft {
      font-size: 10px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 255, 0.35);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .badge-soft span-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    /* Security score donut */
    .score-layout {
      display: flex;
      gap: 18px;
      align-items: center;
    }

    .score-circle-wrap {
      position: relative;
      width: 150px;
      height: 150px;
      flex-shrink: 0;
    }

    .score-svg {
      transform: rotate(-90deg);
    }

    .score-inner {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .score-value {
      font-size: 38px;
      font-weight: 700;
      line-height: 1;
    }

    .score-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      color: var(--text-muted);
      margin-top: 3px;
    }

    .score-chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
    }

    .score-chip {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(24, 32, 63, 0.98);
      border: 1px solid rgba(148, 163, 255, 0.4);
      color: var(--text-muted);
    }

    .score-metrics {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }

    .metric {
      background: radial-gradient(circle at top left, rgba(148, 163, 255, 0.12), transparent 40%),
                  var(--bg-card-alt);
      border-radius: 12px;
      padding: 8px 10px 9px;
      border: 1px solid rgba(55, 65, 114, 0.9);
    }

    .metric-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.07em;
      margin-bottom: 4px;
    }

    .metric-value {
      font-size: 12px;
      font-weight: 500;
    }

    .metric-chip {
      font-size: 10px;
      color: var(--accent-purple);
    }

    /* Threat bars */
    .bar-legend {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-bottom: 6px;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 10px;
      color: var(--text-muted);
    }

    .legend-color {
      width: 10px;
      height: 10px;
      border-radius: 4px;
    }

    .bars {
      display: flex;
      gap: 3px;
      align-items: flex-end;
      height: 80px;
      margin-top: 4px;
    }

    .bar {
      flex: 1;
      border-radius: 999px 999px 4px 4px;
      background: linear-gradient(to top, #22c55e, #22e9ff);
      position: relative;
      overflow: hidden;
      transition: height 0.5s ease;
    }

    .bar-inner-critical {
      background: linear-gradient(to top, #ff006e, #f97316);
    }

    .bar-inner-open {
      background: linear-gradient(to top, #f97316, #facc15);
    }

    .bar-inner-progress {
      background: linear-gradient(to top, #a855f7, #22e9ff);
    }

    .bar-inner-resolved {
      background: linear-gradient(to top, #22c55e, #4ade80);
    }

    .bar span-val {
      position: absolute;
      inset: auto 0 -16px 0;
      text-align: center;
      font-size: 9px;
      color: var(--text-muted);
    }

    .bars-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 10px;
      color: var(--text-muted);
    }

    /* Threat tactics bubbles */
    .bubble-wrap {
      position: relative;
      height: 128px;
      margin-top: 6px;
    }

    .bubble {
      position: absolute;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 500;
      background: radial-gradient(circle at 30% 20%, #0b1020, transparent 55%);
      border: 1.5px solid rgba(148, 163, 255, 0.5);
      box-shadow: 0 0 18px rgba(129, 140, 248, 0.55);
    }

    .bubble-main {
      width: 80px;
      height: 80px;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle at 30% 20%, #0f172a, #020617 60%);
      border-color: rgba(168, 85, 247, 0.9);
    }

    .bubble-main span {
      font-size: 18px;
      color: #e5e7ff;
    }

    .bubble-small {
      width: 46px;
      height: 46px;
    }

    .bubble-label {
      position: absolute;
      bottom: -14px;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      color: var(--text-muted);
      font-size: 9px;
    }

    .tactics-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 12px;
      font-size: 10px;
      color: var(--text-muted);
    }

    /* Table */
    .table-card {
      margin-top: 4px;
    }

    .table-header-row {
      display: grid;
      grid-template-columns: 1.4fr 0.5fr 0.6fr 0.5fr 1.8fr 0.5fr;
      padding: 8px 12px;
      font-size: 10px;
      color: var(--text-muted);
      border-bottom: 1px solid rgba(37, 41, 82, 0.9);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .table-body {
      max-height: 290px;
      overflow: auto;
    }

    .row {
      display: grid;
      grid-template-columns: 1.4fr 0.5fr 0.6fr 0.5fr 1.8fr 0.5fr;
      padding: 9px 12px;
      font-size: 12px;
      align-items: center;
      border-bottom: 1px solid rgba(15, 23, 42, 0.9);
      background: linear-gradient(to right, rgba(15, 23, 42, 0.6), rgba(15, 23, 42, 0.2));
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .row:nth-child(2n) {
      background: linear-gradient(to right, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.4));
    }

    .row span-sub {
      display: block;
      font-size: 11px;
      color: var(--text-muted);
    }

    .severity-pill {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .sev-critical {
      background: rgba(248, 113, 113, 0.1);
      color: #fecaca;
      border: 1px solid rgba(248, 113, 113, 0.9);
    }

    .sev-high {
      background: rgba(251, 191, 36, 0.1);
      color: #fed7aa;
      border: 1px solid rgba(251, 191, 36, 0.9);
    }

    .sev-warning {
      background: rgba(252, 211, 77, 0.08);
      color: #facc15;
      border: 1px solid rgba(252, 211, 77, 0.7);
    }

    .sev-info {
      background: rgba(148, 163, 255, 0.12);
      color: #c7d2fe;
      border: 1px solid rgba(129, 140, 248, 0.7);
    }

    .sev-success {
      background: rgba(34, 197, 94, 0.08);
      color: #bbf7d0;
      border: 1px solid rgba(34, 197, 94, 0.9);
    }

    .status-pill {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.12);
      color: #bbf7d0;
      border: 1px solid rgba(22, 163, 74, 0.9);
      text-align: center;
    }

    .status-open {
      background: rgba(248, 113, 22, 0.16);
      color: #fed7aa;
      border-color: rgba(248, 113, 22, 0.9);
    }

    .cvss-chip {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 255, 0.5);
      color: #c4b5fd;
      background: rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .spark {
      height: 5px;
      border-radius: 999px;
      background: linear-gradient(90deg, #f97316, #a855f7, #22e9ff);
      opacity: 0.9;
    }

    .search-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 12px 6px;
      gap: 12px;
    }

    .search-input-wrap {
      flex: 1;
      position: relative;
    }

    .search-input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 114, 0.9);
      background: rgba(15, 23, 42, 0.95);
      padding: 6px 10px 6px 12px;
      font-size: 11px;
      color: var(--text-main);
    }

    .search-input::placeholder {
      color: rgba(148, 163, 255, 0.6);
    }
    
    /* Log Terminal */
    .log-terminal {
        background: #000;
        color: #0f0;
        font-family: monospace;
        font-size: 11px;
        padding: 10px;
        border-radius: 6px;
        height: 150px;
        overflow-y: auto;
        border: 1px solid #333;
        margin-top: 10px;
        display: none; /* Initially hidden */
    }
    
    .log-entry { margin-bottom: 2px; }

    .footer {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px dashed rgba(55, 65, 114, 0.8);
      font-size: 10px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer span.brand-foot {
      color: var(--accent-purple);
      font-weight: 600;
      letter-spacing: 0.08em;
    }

    /* Scrollbars */
    .table-body::-webkit-scrollbar, .log-terminal::-webkit-scrollbar {
      width: 6px;
    }
    .table-body::-webkit-scrollbar-track, .log-terminal::-webkit-scrollbar-track {
      background: transparent;
    }
    .table-body::-webkit-scrollbar-thumb, .log-terminal::-webkit-scrollbar-thumb {
      background: rgba(55, 65, 114, 0.9);
      border-radius: 999px;
    }

    @media (max-width: 960px) {
      .grid-top {
        grid-template-columns: minmax(0, 1fr);
      }
      .grid-top-right {
        grid-template-columns: minmax(0, 1fr);
      }
      .table-header-row,
      .row {
        grid-template-columns: 1.3fr 0.6fr 0.7fr 0.6fr 1.4fr 0.6fr;
      }
    }

    @media (max-width: 720px) {
      body {
        padding: 12px;
      }
      .shell {
        padding: 14px 14px 20px;
      }
      .topbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      .grid-top-right {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="shell-inner">
      <!-- TOP BAR -->
      <header class="topbar">
        <div class="brand">
          <div class="brand-logo"></div>
          <div>
            <div class="brand-text-title">PARS SECURITY CONSOLE</div>
            <div class="brand-text-sub">POWERED BY SYNARA AI · MESTEG TEKNOLOJİ</div>
          </div>
        </div>

        <div class="top-actions">
           <!-- TARGET CONTROL PANEL (NEW) -->
           <div class="target-input-group">
               <input type="text" id="target-input" class="target-input" placeholder="Hedef Domain (örn: example.com)" />
               <button id="btn-start" class="btn-action btn-start" onclick="startScan()">BAŞLAT</button>
               <button id="btn-stop" class="btn-action btn-stop" onclick="stopScan()" style="display:none;">DURDUR</button>
           </div>
           
          <div class="nav-tabs">
            <button class="nav-tab nav-tab-active" onclick="switchTab('dashboard')">
              <span class="dot"></span> Dashboard
            </button>
            <button class="nav-tab" onclick="toggleLogs()">
              <span class="dot"></span> Logs
            </button>
          </div>
          <div class="pill">
            <span-dot></span-dot>
            Profil: <strong id="profile-label">BUG_BOUNTY_CORE</strong>
          </div>
          <div class="avatar"></div>
        </div>
      </header>
      
      <!-- LOG TERMINAL (Hidden by default) -->
      <div id="log-terminal" class="log-terminal">
          <div class="log-entry">> PARS Console Ready...</div>
      </div>

      <!-- TOP GRID -->
      <section class="grid-top">
        <!-- SCORE / SUMMARY CARD -->
        <article class="card">
          <div class="card-header">
            <div>
              <div class="card-title">
                <span class="accent-bar"></span>
                Hedef Güvenlik Özeti
              </div>
              <div class="card-subtext">
                <span id="target-url">---</span> ·
                <span id="scan-date">---</span> ·
                <span id="scan-status-text">Beklemede</span>
              </div>
            </div>
            <div class="badge-soft">
              Last SRP Drop:
              <strong id="srp-last-drop">0.0</strong>
            </div>
          </div>

          <div class="score-layout">
            <div class="score-circle-wrap">
              <svg class="score-svg" width="150" height="150">
                <circle cx="75" cy="75" r="60"
                        stroke="rgba(15,23,42,0.9)"
                        stroke-width="12"
                        fill="none" />
                <circle id="score-ring"
                        cx="75" cy="75" r="60"
                        stroke="url(#gradScore)"
                        stroke-width="12"
                        stroke-linecap="round"
                        fill="none"
                        stroke-dasharray="377"
                        stroke-dashoffset="75" />
                <defs>
                  <linearGradient id="gradScore" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#22c55e"/>
                    <stop offset="50%" stop-color="#22e9ff"/>
                    <stop offset="100%" stop-color="#a855f7"/>
                  </linearGradient>
                </defs>
              </svg>
              <div class="score-inner">
                <div class="score-value" id="score-value">100</div>
                <div class="score-label">security score</div>
              </div>
            </div>

            <div style="flex:1; min-width:0;">
              <div class="card-subtext" style="margin-bottom:4px;">
                PARS, bu hedef üzerinde çok modüllü tarama çalıştırır. Ağırlıklı CVSS ve SRP
                algoritması, yüzdelik güvenlik skorunu hesaplar.
              </div>

              <div class="score-chip-row">
                <div class="score-chip">Toplam bulgu: <strong id="total-findings">0</strong></div>
                <div class="score-chip">Kritik: <strong id="count-critical">0</strong></div>
                <div class="score-chip">Yüksek/Orta: <strong id="count-high">0</strong></div>
                <div class="score-chip">Bilgi/Success: <strong id="count-info">0</strong></div>
              </div>

              <div class="score-metrics">
                <div class="metric">
                  <div class="metric-label">Toplam İstek</div>
                  <div class="metric-value" id="metric-requests">0</div>
                  <div class="metric-chip">HTTP Requests</div>
                </div>
                <div class="metric">
                  <div class="metric-label">Toplam CVSS Etkisi</div>
                  <div class="metric-value" id="metric-cvss">0.0</div>
                  <div class="metric-chip">SRP düşüş hesabına dahil</div>
                </div>
                <div class="metric">
                  <div class="metric-label">Profil modu</div>
                  <div class="metric-value" id="metric-profile">Bug Bounty Core</div>
                  <div class="spark"></div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- RIGHT SIDE SMALL CARDS -->
        <div class="grid-top-right">
          <!-- THREAT STATUS -->
          <article class="card card-compact">
            <div class="card-header">
              <div>
                <div class="card-title">
                  <span class="accent-bar"></span>
                  Durum Dağılımı
                </div>
                <div class="card-subtext">Açık / Çözülen / Devam Eden bulgular.</div>
              </div>
              <div class="badge-soft">
                Bugün · <span id="badge-day">Realtime</span>
              </div>
            </div>

            <div class="bar-legend">
              <div class="legend-item">
                <span class="legend-color" style="background:#f97316;"></span> Open
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background:#a855f7;"></span> In Progress
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background:#22c55e;"></span> Resolved
              </div>
            </div>

            <div class="bars">
              <div class="bar">
                <div class="bar-inner-open" style="height:0%;"></div>
                <span-val>Open</span-val>
              </div>
              <div class="bar">
                <div class="bar-inner-progress" style="height:0%;"></div>
                <span-val>InProg</span-val>
              </div>
              <div class="bar">
                <div class="bar-inner-resolved" style="height:0%;"></div>
                <span-val>Resolved</span-val>
              </div>
              <div class="bar">
                <div class="bar-inner-critical" style="height:0%;"></div>
                <span-val>Critical</span-val>
              </div>
            </div>

            <div class="bars-footer">
              <span>Aktif izlenen bulgu: <strong id="active-count">0</strong></span>
              <span>Otomatik triage: <strong>ON</strong></span>
            </div>
          </article>

          <!-- THREAT TACTICS / MODULE IMPACT -->
          <article class="card card-compact">
            <div class="card-header">
              <div>
                <div class="card-title">
                  <span class="accent-bar"></span>
                  Modül Etki Haritası
                </div>
                <div class="card-subtext">SRP'ye en çok etki eden modüller.</div>
              </div>
              <div class="badge-soft">
                <span-dot></span-dot>
                SRP v4.0
              </div>
            </div>

            <div class="bubble-wrap">
              <div class="bubble bubble-main">
                <span id="bubble-total-srp">0.0</span>
                <div class="bubble-label">Toplam SRP Düşüşü</div>
              </div>

              <div class="bubble bubble-small" style="left:12%; top:18%; border-color:#fb923c;">
                <span>SQLi</span>
                <div class="bubble-label">0.0</div>
              </div>

              <div class="bubble bubble-small" style="right:10%; top:12%; border-color:#22e9ff;">
                <span>HEAD</span>
                <div class="bubble-label">Header</div>
              </div>

              <div class="bubble bubble-small" style="left:8%; bottom:6%; border-color:#a855f7;">
                <span>BL</span>
                <div class="bubble-label">Business</div>
              </div>

              <div class="bubble bubble-small" style="right:5%; bottom:10%; border-color:#22c55e;">
                <span>OSINT</span>
                <div class="bubble-label">Info</div>
              </div>
            </div>

            <div class="tactics-footer">
              <span>AI chaining analizi: <strong id="chain-status">Beklemede</strong></span>
              <span>Kritik zincir: <strong id="chain-count">0</strong> potansiyel yol</span>
            </div>
          </article>
        </div>
      </section>

      <!-- TABLE SECTION -->
      <section class="card table-card">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span class="accent-bar"></span>
              Tespit Edilen Bulgular
            </div>
            <div class="card-subtext">
              PARS tarafından raporlanan tüm modül bulguları. SRP hesabına girenler işaretlidir.
            </div>
          </div>
        </div>

        <div class="search-row">
          <div class="search-input-wrap">
            <input class="search-input" placeholder="Kategori, mesaj veya URL içinde ara..." />
          </div>
          <div class="badge-soft">
            Son rapor:
            <strong id="last-report-date">--.--.----</strong>
          </div>
        </div>

        <div class="table-header-row">
          <div>Modül / Kategori</div>
          <div>Seviye</div>
          <div>SRP Düşüş</div>
          <div>Saat</div>
          <div>Mesaj</div>
          <div>Durum</div>
        </div>

        <div class="table-body" id="findings-table">
          <!-- Dinamik satırlar buraya gelecek -->
          <div class="row" style="text-align:center; display:block; padding:20px; color:#555;">
             Henüz tarama başlatılmadı.
          </div>
        </div>

        <div class="footer">
          <span>ENGINE: PARS v17.1 · SRP v4.0 · Async/Thread Hybrid Scanner</span>
          <span>Generated by <span class="brand-foot">MESTEG · SYNARA AI CORE</span></span>
        </div>
      </section>
    </div>
  </div>

  <script>
    // --- CONFIGURATION ---
    const API_BASE_URL = "http://localhost:8000/api";
    let pollInterval = null;
    let isScanning = false;

    // --- DOM ELEMENTS ---
    const els = {
        targetInput: document.getElementById('target-input'),
        btnStart: document.getElementById('btn-start'),
        btnStop: document.getElementById('btn-stop'),
        targetUrlDisplay: document.getElementById('target-url'),
        scanStatusText: document.getElementById('scan-status-text'),
        logTerminal: document.getElementById('log-terminal'),
        findingsTable: document.getElementById('findings-table')
    };

    // --- CORE FUNCTIONS ---

    async function startScan() {
        const target = els.targetInput.value.trim();
        if (!target) {
            alert("Lütfen bir hedef domain giriniz!");
            return;
        }

        updateLog(`> [INIT] Tarama başlatılıyor: ${target}...`);
        
        try {
            const res = await fetch(`${API_BASE_URL}/start-scan`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ target: target, scope: 'full' })
            });

            const data = await res.json();

            if (res.ok) {
                isScanning = true;
                setScanningState(true);
                els.targetUrlDisplay.innerText = data.target;
                els.scanStatusText.innerText = "Taranıyor...";
                startPolling();
                updateLog(`> [SUCCESS] Motor çalıştı. ID: ${Date.now()}`);
            } else {
                updateLog(`> [ERROR] ${data.error}`);
                alert("Hata: " + data.error);
            }
        } catch (e) {
            updateLog(`> [FATAL] Sunucuya bağlanılamadı!`);
            console.error(e);
            alert("API Sunucusu kapalı olabilir.");
        }
    }

    async function stopScan() {
        try {
            const res = await fetch(`${API_BASE_URL}/stop-scan`, { method: 'POST' });
            const data = await res.json();
            updateLog(`> [STOP] ${data.message}`);
            setScanningState(false);
        } catch(e) {
            console.error(e);
        }
    }

    function startPolling() {
        if (pollInterval) clearInterval(pollInterval);
        
        pollInterval = setInterval(async () => {
            if (!isScanning) {
                clearInterval(pollInterval);
                return;
            }

            try {
                const res = await fetch(`${API_BASE_URL}/scan-status`);
                const data = await res.json();

                if (data.logs && data.logs.length > 0) {
                    data.logs.forEach(log => updateLog(`> ${log}`));
                }

                if (!data.isRunning) {
                    isScanning = false;
                    setScanningState(false);
                    els.scanStatusText.innerText = "Tamamlandı";
                    updateLog("> [FINISH] Tarama işlemi bitti.");
                    clearInterval(pollInterval);
                }

                // TODO: Gerçek bulgular API'den gelirse burada tabloyu güncelle
                // renderFindings(data.vulnerabilities);

            } catch (e) {
                console.error("Polling error:", e);
            }
        }, 2000);
    }

    // --- UI HELPERS ---

    function setScanningState(scanning) {
        if (scanning) {
            els.btnStart.style.display = 'none';
            els.btnStop.style.display = 'inline-block';
            els.targetInput.disabled = true;
        } else {
            els.btnStart.style.display = 'inline-block';
            els.btnStop.style.display = 'none';
            els.targetInput.disabled = false;
        }
    }

    function updateLog(msg) {
        const div = document.createElement('div');
        div.className = 'log-entry';
        div.innerText = msg;
        els.logTerminal.appendChild(div);
        els.logTerminal.scrollTop = els.logTerminal.scrollHeight;
    }
    
    function toggleLogs() {
        if(els.logTerminal.style.display === 'none' || !els.logTerminal.style.display) {
            els.logTerminal.style.display = 'block';
        } else {
            els.logTerminal.style.display = 'none';
        }
    }

    // --- ANIMATIONS ---
    (function () {
      const score = 100; 
      const circle = document.getElementById("score-ring");
      const scoreVal = document.getElementById("score-value");
      if (!circle) return;

      const radius = circle.r.baseVal.value;
      const circumference = 2 * Math.PI * radius;
      circle.style.strokeDasharray = `${circumference}`;
      const offset = circumference - (score / 100) * circumference;
      circle.style.strokeDashoffset = circumference;

      scoreVal.textContent = score.toString();

      requestAnimationFrame(() => {
        setTimeout(() => {
          circle.style.transition = "stroke-dashoffset 1s ease-out";
          circle.style.strokeDashoffset = offset;
        }, 220);
      });
    })();
  </script>
</body>
</html>